<!doctype html>
<html lang="en">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	
	<!-- Font Awesome CSS -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
	
	<!-- highlight.js -->
	<!-- <link rel="stylesheet" href="highlight.default.css">
	<script src="highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script> -->
	
	<title>plankton</title>

	<style type="text/css">
		header {
			padding: .75rem;
		}
		header .logos a {
			display: inline-block;
		}
		header .logos a:hover {
			opacity: .7;
			transform: scale(1.05, 1.05);
		}

		table.experiments .fas, table.experiments .far {
			width: 1.25em;
		}
		table.experiments .fa-check, .experiments.fa-check {
			color: #33DD33;
		}
		table.experiments .fa-times, .experiments.fa-times {
			color: #DD3333;
		}
		table.experiments .fa-clock, .experiments.fa-clock {
			color: #EACF33;
		}

		kbd {
			text-transform: uppercase;
			/*background-color: #820954;*/
			background-color: #e83e8c;
		}

		.code-link {
			color: #e83e8c;
		}

		.tooltip-inner {
			/*max-width: 400px;*/
			max-width: 25rem;
		}
		/*.tooltip-inner i {
			font-weight: 600;
		}*/
		span.ref-full::before, span.ref-year::before, .ref-item-id::before {
			content: "[";
		}
		span.ref-full::after, span.ref-year::after, .ref-item-id::after {
			content: "]";
		}
		.ref-item {
			margin-top: .35rem;
		}
		.ref-item-id, .ref-item-id::before, .ref-item-id::after {
			font-weight: bold;
		}
		.ref-item-paper {
			font-style: italic;
		}
	</style>
</head>
<body>
	<header>
		<div class="container clearfix">
			<h1 class="display-4 text-muted text-left mt-3 float-left">
				<!-- <small>... Project Page</small> -->
			</h1>
			<h1 class="display-4 text-muted text-right mt-3 float-right logos">
				<a target="new" href="https://www.tcs.cs.tu-bs.de/index.html">
					<img src="img/tubs.svg" alt="Institute of Theoretical Computer Science" style="height: .85em; margin-top: -.15em;">
				</a>
				<a target="new" href="https://cs.nyu.edu/acsys/index.html">
					<img src="img/nyu.svg" alt="Analysis of Computer Systems Group" style="height: .85em; margin-top: -.15em;">
				</a>
			</h1>
		</div>
	</header>

	<div class="container clearfix">
		<!-- ********************************************************************************** -->
		<!-- ************************************** PAPER ************************************* -->
		<!-- ********************************************************************************** -->
		<div class="jumbotron">
			<!-- <img src="artifacts_evaluated_reusable.png" class="ml-4 mr-3" style="max-height: 9rem; float: right;"> -->
			<h1 style="font-size: 2.75rem;">
				Make flows small again: revisiting the flow framework
			</h1>
			<h3>
				<small>
					<a target="new" href="https://www.tcs.cs.tu-bs.de/group/meyer/home.html">Roland Meyer</a>,
					TU Braunschweig, Germany
				</small>
				<br>
				<small>
					<a target="new" href="https://cs.nyu.edu/~wies/">Thomas Wies</a>,
					New York University, USA
				</small>
				<br>
				<small>
					<a target="new" href="https://wolff09.github.io">Sebastian Wolff</a>,
					New York University, USA
				</small>
			</h3>
			<h4>
				<small>
					<!-- Presented at <a target="new" href="#">...</a>. -->
					<!-- Accepted for <a target="new" href="#">...</a>. -->
					Under submission.
				</small>
			</h4>
			<p class="lead text-justify mb-2">
				<strong>Abstract.</strong>
					We present a new flow framework for separation logic reasoning about programs that manipulate general graphs.
					The framework overcomes problems in earlier developments: it is based on standard fixed point theory, guarantees least flows, rules out vanishing flows, and has an easy to understand notion of footprint as needed for soundness of the frame rule.
					In addition, we present algorithms for automating the frame rule, which we evaluate on graph updates extracted from linearizability proofs for concurrent data structures.
					The evaluation demonstrates that our algorithms help to automate key aspects of these proofs that have previously relied on user guidance or heuristics.
			</p>
			
			<div class="text-right mt-3">
				<a target="new" href="TACAS_2023_paper_149.pdf" class="btn btn-primary text-right">
					<i class="far fa-file-pdf"></i> 
					Paper
				</a>
				<!-- <a target="new" href="#" class="btn btn-primary text-right">
					<i class="far fa-file-pdf"></i> 
					Slides
				</a> -->
				<!-- <a target="new" href="#" class="btn btn-primary text-right">
					<i class="far fa-file-pdf"></i> 
					Tech Report
				</a> -->
				<!-- <a target="new" href="#" class="btn btn-primary text-right">
					<i class="far fa-file-pdf"></i> 
					DOI
				</a> -->
				<a target="new" href="https://github.com/nyu-acsys/krill/releases/tag/TACAS23" class="btn btn-primary text-right">
					<i class="fas fa-code"></i>
					Source Code
				</a>
				<!-- <a target="new" href="#" class="btn btn-primary text-right">
					<i class="fas fa-hdd"></i>
					Artifact
				</a> -->
			</div>
		</div>

		<!-- ********************************************************************************** -->
		<!-- *********************************** QUICKSTART *********************************** -->
		<!-- ********************************************************************************** -->

		<!-- Quick Start -->
		<div class="alert alert-info container">
			<strong><i class="fas fa-shipping-fast"></i> Quick Start <i class="fas fa-shipping-fast"></i></strong>
			<ol class="mt-2 mb-2">
				<li class="mt-1">
					Install <a target="new" href="https://www.docker.com/">Docker</a>.
				</li>
				<li class="mt-1">
					Get the thing running in a Docker container: <br>
					<pre class="mb-0"><code style="color: #e83e8c;"><!--
-->git clone --branch TACAS23 https://github.com/nyu-acsys/krill.git krill \
  && cd krill \
  && docker build . -t krill \
  && docker run -it krill<!--
					--></code></pre>
					<i class="fas fa-link text-secondary"></i> <a href="#installation" class="text-secondary">See Compilation and Installation</a>
				</li>
				<li class="mt-1">
					Run the benchmark suite in the Docker container: <code>./eval</code>
					<br>
					<i class="fas fa-link text-secondary"></i> <a href="#benchmarks" class="text-secondary">See Benchmarking</a>
				</li>
				<li class="mt-1">
					Presto!
				</li>
			</ol>
		</div>
		<br>



		<!-- ********************************************************************************** -->
		<!-- ************************************* TOOLS ************************************** -->
		<!-- ********************************************************************************** -->

		<div class="mt-4">
			<h1>Tool Overview</h1>
			<p>
				The purpose of <kbd>krill</kbd> is to compute the footprint for the difference of two graphs.
				It takes as input semi-symbolic flow graphs, meaning that the nodes in the graph are fixed but the contents of those nodes and their edges are described by logic constraints.
			</p>
			<p>
				<kbd>krill</kbd> comes with a benchmark suite that was extracted from the <kbd>plankton</kbd> tool, an experimental verifyer for lock-free set data structures.
				More specifically, we used <kbd>plankton</kbd>'s benchmarks and recorded all the flow graphs for which it computes footprint during proof construction.
			</p>
			<!-- <p>
				We submitted our tool to the <a target="new" href="#">... artifact evaluation</a> where it received the <i>Artifact Evaluated &mdash; Reusable</i> badge.
			</p> -->
			<p>
				A discussion on how to reproduce our experiments follows.
				Therefore, we walk through the installation, compilation, and benchmarking.
			</p>
		</div>
		<br>


		<!-- ********************************************************************************** -->
		<!-- ************************************* INSTALL ************************************ -->
		<!-- ********************************************************************************** -->

		<div class="mt-4">
			<h1 id="installation">Compilation and Installation</h1>
			<p>This section describes how to setup your system to repeat the benchmarks from the paper.</p>

			<h4>Download</h4>
			<p>
				The source code can be downloaded from GitHub:
				&nbsp;&nbsp;<i class="fas fa-link"></i> <a target="new" href="https://github.com/nyu-acsys/krill/releases/tag/TACAS23">
					GitHub release with tag <code>TACAS23</code>
				</a>
			</p>
			<p>
				Alternatively, you may wish to clone/download a potentially different version from GitHub:
				&nbsp;&nbsp;<i class="fas fa-link"></i> <a target="new" href="https://github.com/nyu-acsys/krill/">
					GitHub repository
				</a>
			</p>

			<h4>System Requirements</h4>
			<p>
				To compile this project you need <strong>CMake</strong> (>3.21), <strong>GCC</strong> and <strong>G++</strong> (>10.0) or <strong>CLAN</strong> (>12.0), <strong>Java JRE</strong> (>1.6), and <strong>Z3</strong> (<a target="new" href="https://github.com/Z3Prover/z3/releases/tag/z3-4.8.7">v4.8.7</a>).
				Compilation with <strong>CLAN</strong> (>12.0) is also possible.
				To run the benchmark suite, you also need <strong>Pyton 3</strong> (>3.5), <strong>latex</strong>, and <strong>pgfplots</strong>.
			</p>

			<h4>Z3 Version</h4>
			<p>
				For reproducing the results, we recommend using Z3 version <a target="new" href="https://github.com/Z3Prover/z3/releases/tag/z3-4.8.7">4.8.7</a>.
				Versions >4.8.7 generally fail to run <a href="https://z3prover.github.io/api/html/classz3_1_1solver.html#a4322874cf842109514596806684cd4d7"><code>z3::solver::consequences()</code></a>.
				We do not expect this to influence the evaluation with <kbd>krill</kbd>, but it does affect <kbd>plankton</kbd> and the flow graph extraction.
				More specifically, if <a href="https://z3prover.github.io/api/html/classz3_1_1solver.html#a4322874cf842109514596806684cd4d7"><code>z3::solver::consequences()</code></a> fails, <kbd>plankton</kbd> issues a warning and uses a backup procedure relying on <a href="https://z3prover.github.io/api/html/classz3_1_1solver.html#a65d4e25fe55aa280fa800b9611cd8c04"><code>z3::solver::check()</code></a>.
				The backup procedure tremendously decreases performance, hence increases the runtime.
			</p>

			<p>
				If you compile Z3 yourself, we highly recommend to use the same compiler (GCC/G++ vs CLANG) as for compiling this project.
			</p>

			<h4>Compilation</h4>
			<p>
				To build the project, do the following:</p>
			<pre class="bg-light border"><code class="bash">
        cd path/to/krill
        mkdir build
        cd build
        CXX=/path/to/CXX-compiler cmake .. -DCMAKE_INSTALL_PREFIX=/path/to/installation
        CXX=/path/to/CXX-compiler make
        make install
			</code></pre>
			<p>
				This creates a folder <code>/path/to/installation/krill</code> at the specified location.
				This folder contains all binaries, scripts, and examples needed to reproduce the evaluation from the paper.
				Note that this includes binaries for both <kbd>krill</kbd> and <kbd>plankton</kbd>.
			</p>
			<p>
				We recommend to use the <code>-DCMAKE_INSTALL_PREFIX</code> to specify a location where to install the tool.
				Omitting this flag will install the tool somewhere like <code>/usr/local/</code>.
				You can customize the folder that is appended to <code>/path/to/installation</code> by setting <code>-DINSTALL_FOLDER</code> appropriately in the cmake invocation.
			</p>
			<p>
				You can omit setting the <code>CXX</code> environment variable to use your system's default compiler.
			</p>

			<h4>Troubleshooting</h4>
			<p>
				There are some known issues you might run into.
			</p>
			<dl>
				<dt>Issue: missing external dependencies</dt>
				<dd>
					The project includes the code for <code>AntLR</code>, however, your system might miss some dependencies for it to build successfully.
					On Linux (tested with Ubuntu >18.04), make sure you have <code>uuid</code>, <code>uuid-dev</code>, and <code>pkg-config</code> installed.
				</dd>

				<dt>Issue: timeout while cloning from GitHub</dt>
				<dd>
					In some versions, the build process of <code>AntLR</code> fetches the library <code>utfcpp</code> from GitHub.
					In some (mainly academic) network setups this may fail and time out.
					The problem can be solved by forcing <code>git</code> to use <code>https</code> like so:
			<pre class="bg-light border"><code class="bash">
        git config --global url."https://".insteadOf git://
			</code></pre>
				</dd>

				<dt>Issue: <code>clang</code> and <code>libc++</code></dt>
				<dd>
					When building with <code>clang</code>, you might run into problems compiling and linking <code>AntLR</code>.
					To solve this (tested with Ubuntu >18.04), install <code>libc++-dev</code> and <code>libc++abi-dev</code>.
					Then, create a compiler wrapper <code>stdclang</code> like so
			<pre class="bg-light border"><code class="bash">
        sudo touch /usr/bin/stdclang
        sudo chmod a+x /usr/bin/stdclang
			</code></pre>
					Edit the created file <code>/usr/bin/stdclang</code> to contain this:
			<pre class="bg-light border"><code class="bash">
        #!/bin/bash
        clang++ -stdlib=libc++ $@
			</code></pre>
					With this, use <code>stdclang</code> as the <code>CXX</code> compiler in the above build commands; it properly sets up <code>clang++</code> to use <code>libc++</code>.
				</dd>
			</dl>

			<h4>Docker</h4>
			<p>
				The repository comes with a <code>Dockerfile</code> that creates a Docker container with the necessary dependencies and an installation.
				To use it, you can something like this:
			</p>
				<pre class="bg-light border"><code class="bash">
        cd path/to/krill
        docker build . -t krill
        docker run -it krill
			</code></pre>
		</div>
		<br>
		

		<!-- ********************************************************************************** -->
		<!-- ********************************** BENCHMARKING ********************************** -->
		<!-- ********************************************************************************** -->
		<div class="mt-4">
			<h1 id="benchmarks">Benchmarking</h1>
			<p>
				We describe how to repeat the benchmarks from the paper for computing footprints for the difference of two flow graphs.
				The flow graphs were extracted from <kbd>plankton</kbd>'s proof generation for lock-free set data structures.
			</p>

			<h4 id="benchmarks-programs">Benchmark Flow Graphs</h4>
			<p>
				We extracted flow graphs capturing the updates as encountered while verifying the following implementations:
			</p>
			<ul>
				<li>
					<i>Fine-grained set</i> <span class="ref-full">HerlihyS08</span>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/Fine.pl">Code</a>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/graphs/Fine.pl">Flow Graph</a>
				</li>
				<li>
					<i>Lazy set</i> <span class="ref-full">HellerHLMSS05</span>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/Lazy.pl">Code</a>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/graphs/Lazy.pl">Flow Graph</a>
				</li>
				<li>
					<i>FEMRS tree (no maintenance)</i> <span class="ref-full">FeldmanEMRS18</span>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/FEMRS.pl">Code</a>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/graphs/FEMRS.pl">Flow Graph</a>
				</li>
				<li>
					<i>Vechev&Yahav's DCAS set</i> <span class="ref-full">VechevY08</span>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/VY-DCAS.pl">Code</a>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/graphs/VY-DCAS.pl">Flow Graph</a>
				</li>
				<li>
					<i>Vechev&Yahav's CAS set</i> <span class="ref-full">VechevY08</span>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/VY-CAS.pl">Code</a>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/graphs/VY-CAS.pl">Flow Graph</a>
				</li>
				<li>
					<i>ORVYY's set</i> <span class="ref-full">OHearnRVYY10</span>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/ORVYY.pl">Code</a>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/graphs/ORVYY.pl">Flow Graph</a>
				</li>
				<li>
					<i>Michael's set</i> <span class="ref-full">Michael02a</span>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/Michael.pl">Code</a>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/graphs/Michael.pl">Flow Graph</a>
				</li>
				<li>
					<i>Harris' set</i> <span class="ref-full">Harris01</span>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/Harris.pl">Code</a>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/graphs/Harris.pl">Flow Graph</a>
				</li>
				<li>
					<i>Michael's set (with wait-free search)</i> <span class="ref-full">Michael02a</span>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/MichaelWF.pl">Code</a>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/graphs/MichaelWF.pl">Flow Graph</a>
				</li>
				<li>
					<i>Harris' set (with wait-free search)</i> <span class="ref-full">Harris01</span>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/HarrisWF.pl">Code</a>
					&nbsp;<i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/blob/TACAS23/examples/graphs/HarrisWF.pl">Flow Graph</a>
				</li>
			</ul>
			
			<h4>Running Benchmarks</h4>
			<p>
				To run the benchmarks go to the installation folder and execute the benchmark script like so:
			</p>
			<pre class="bg-light border"><code class="bash">
        cd path/to/installation
        ./eval.sh
			</code></pre>
			<p>
				The <code>eval.sh</code> script runs each benchmark for 100 times.
				To modify the repetition count, just pass the desired count as an argument to the script, e.g., <code>./eval 77</code>.
				You can customize the file the evaluation is written to doing this: <code>./eval.sh 77 path/to/file</code>.
			</p>
			<p>
				The <code>eval.sh</code> script produces a PDF <code>eval.pdf</code> containing the result of the evaluation, i.e., reproducing tables/charts like the ones from the paper.
			</p>
			
			<h4>Expected Benchmarks Results</h4>
			<p>
				We repeat our evaluation.
				We used an Apple M1 Pro with 16GB of RAM.
				We mark successful tasks with <i class="experiments fas fa-check"></i>, failed tasks with <i class="experiments fas fa-times"></i>, and timed out tasks with <i class="experiments far fa-clock"></i>.
				The #FG refers to the number of flow graphs that a footprint is computed for.
				The speedup refers to the speedup of the new method compared to the naive method.
			</p>

			<div class="alert alert-warning">
				Runtimes on traditional <code>x86/amd64</code> hardware are likely to be slower than the Apple Silicone runtimes reported here.
				However, we expect traditional hardware to produce the same tendencies.
			</div>

			<table class="table experiments border">
				<thead>
					<tr>
						<th scope="col">Program (on <code>Apple M1</code>)</th>
						<th class="text-right" scope="col">#FG</th>
						<th class="text-right" scope="col">Naive</th>
						<th class="text-right" scope="col">Diff</th>
						<th class="text-right" scope="col">New</th>
						<th class="text-right" scope="col">Speedup</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<th scope="row">Fine-Grained set</th>
						<td class="text-right">12</td>
						<td class="text-right">75ms</td>
						<td class="text-right">48ms</td>
						<td class="text-right">46ms</td>
						<td class="text-right">39%</td>
					</tr>
					<tr>
						<th scope="row">Lazy set</th>
						<td class="text-right">14</td>
						<td class="text-right">73ms</td>
						<td class="text-right">52ms</td>
						<td class="text-right">51ms</td>
						<td class="text-right">30%</td>
					</tr>
					<tr>
						<th scope="row">FEMRS tree (no maintenance)</th>
						<td class="text-right">120</td>
						<td class="text-right">519ms</td>
						<td class="text-right">409ms</td>
						<td class="text-right">407ms</td>
						<td class="text-right">22%</td>
					</tr>
					<tr>
						<th scope="row">Vechev&Yahav's 2CAS set</th>
						<td class="text-right">19</td>
						<td class="text-right">109ms</td>
						<td class="text-right">74ms</td>
						<td class="text-right">73ms</td>
						<td class="text-right">33%</td>
					</tr>
					<tr>
						<th scope="row">Vechev&Yahav's CAS set</th>
						<td class="text-right">28</td>
						<td class="text-right">139ms</td>
						<td class="text-right">104ms</td>
						<td class="text-right">102ms</td>
						<td class="text-right">27%</td>
					</tr>
					<tr>
						<th scope="row">ORVYY's set</th>
						<td class="text-right">20</td>
						<td class="text-right">106ms</td>
						<td class="text-right">76ms</td>
						<td class="text-right">74ms</td>
						<td class="text-right">30%</td>
					</tr>
					<tr>
						<th scope="row">Michael's set</th>
						<td class="text-right">225</td>
						<td class="text-right">1216ms</td>
						<td class="text-right">887ms</td>
						<td class="text-right">874ms</td>
						<td class="text-right">28%</td>
					</tr>
					<tr>
						<th scope="row">Michael's set (wait-free)</th>
						<td class="text-right">186</td>
						<td class="text-right">996ms</td>
						<td class="text-right">731ms</td>
						<td class="text-right">721ms</td>
						<td class="text-right">27%</td>
					</tr>
					<tr>
						<th scope="row">Harris' set</th>
						<td class="text-right">352</td>
						<td class="text-right">2242ms</td>
						<td class="text-right">1490ms</td>
						<td class="text-right">1443ms</td>
						<td class="text-right">36%</td>
					</tr>
					<tr>
						<th scope="row">Harris' set (wait-free)</th>
						<td class="text-right">296</td>
						<td class="text-right">1859ms</td>
						<td class="text-right">1242ms</td>
						<td class="text-right">1205ms</td>
						<td class="text-right">35%</td>
					</tr>
				</tbody>
			</table>

			<!-- <p>
				As noted above, <code>x86/amd64</code> runtimes may be slower.
				For comparison, the below table provides runtimes on an Intel i5-8600K with 16GB of RAM.
			</p>

			<table class="table experiments border">
				<thead>
					<tr>
						<th scope="col">Program (on <code>x86/amd64</code>)</th>
						<th class="text-right" scope="col">Iter</th>
						<th class="text-right" scope="col">Eff</th>
						<th class="text-right" scope="col">Cand</th>
						<th class="text-right" scope="col">Com</th>
						<th class="text-right" scope="col">Fut</th>
						<th class="text-right" scope="col">Hist</th>
						<th class="text-right" scope="col">Join</th>
						<th class="text-right" scope="col">Inter</th>
						<th class="text-right" scope="col">Linearizability</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<th scope="row">Fine-Grained set</th>
						<td class="text-right">2</td>
						<td class="text-right">5</td>
						<td class="text-right">2</td>
						<td class="text-right">11%</td>
						<td class="text-right">15%</td>
						<td class="text-right">43%</td>
						<td class="text-right">15%</td>
						<td class="text-right">8%</td>
						<td class="text-right font-weight-bold">??s <i class="fas fa-check"></i></td>
					</tr>
					<tr>
						<th scope="row">Lazy set</th>
						<td class="text-right">2</td>
						<td class="text-right">6</td>
						<td class="text-right">2</td>
						<td class="text-right">10%</td>
						<td class="text-right">13%</td>
						<td class="text-right">54%</td>
						<td class="text-right">11%</td>
						<td class="text-right">5%</td>
						<td class="text-right font-weight-bold">??s <i class="fas fa-check"></i></td>
					</tr>
					<tr>
						<th scope="row">FEMRS tree (no maintenance)</th>
						<td class="text-right">2</td>
						<td class="text-right">5</td>
						<td class="text-right">2</td>
						<td class="text-right">19%</td>
						<td class="text-right">0%</td>
						<td class="text-right">49%</td>
						<td class="text-right">1%</td>
						<td class="text-right">9%</td>
						<td class="text-right font-weight-bold">??s <i class="fas fa-check"></i></td>
					</tr>
					<tr>
						<th scope="row">Vechev&Yahav's 2CAS set</th>
						<td class="text-right">2</td>
						<td class="text-right">3</td>
						<td class="text-right">1</td>
						<td class="text-right">14%</td>
						<td class="text-right">0%</td>
						<td class="text-right">33%</td>
						<td class="text-right">31%</td>
						<td class="text-right">9%</td>
						<td class="text-right font-weight-bold">??s <i class="fas fa-check"></i></td>
					</tr>
					<tr>
						<th scope="row">Vechev&Yahav's CAS set</th>
						<td class="text-right">2</td>
						<td class="text-right">4</td>
						<td class="text-right">1</td>
						<td class="text-right">15%</td>
						<td class="text-right">7%</td>
						<td class="text-right">39%</td>
						<td class="text-right">23%</td>
						<td class="text-right">6%</td>
						<td class="text-right font-weight-bold">??s <i class="fas fa-check"></i></td>
					</tr>
					<tr>
						<th scope="row">ORVYY's set</th>
						<td class="text-right">2</td>
						<td class="text-right">3</td>
						<td class="text-right">0</td>
						<td class="text-right">17%</td>
						<td class="text-right">0%</td>
						<td class="text-right">40%</td>
						<td class="text-right">26%</td>
						<td class="text-right">6%</td>
						<td class="text-right font-weight-bold">??s <i class="fas fa-check"></i></td>
					</tr>
					<tr>
						<th scope="row">Michael's set</th>
						<td class="text-right">2</td>
						<td class="text-right">4</td>
						<td class="text-right">2</td>
						<td class="text-right">11%</td>
						<td class="text-right">29%</td>
						<td class="text-right">30%</td>
						<td class="text-right">15%</td>
						<td class="text-right">6%</td>
						<td class="text-right font-weight-bold">??s <i class="fas fa-check"></i></td>
					</tr>
					<tr>
						<th scope="row">Michael's set (wait-free)</th>
						<td class="text-right">2</td>
						<td class="text-right">4</td>
						<td class="text-right">2</td>
						<td class="text-right">11%</td>
						<td class="text-right">28%</td>
						<td class="text-right">30%</td>
						<td class="text-right">15%</td>
						<td class="text-right">6%</td>
						<td class="text-right font-weight-bold">??s <i class="fas fa-check"></i></td>
					</tr>
					<tr>
						<th scope="row">Harris' set</th>
						<td class="text-right">2</td>
						<td class="text-right">4</td>
						<td class="text-right">2</td>
						<td class="text-right">7%</td>
						<td class="text-right">8%</td>
						<td class="text-right">19%</td>
						<td class="text-right">32%</td>
						<td class="text-right">4%</td>
						<td class="text-right font-weight-bold">??s <i class="fas fa-check"></i></td>
					</tr>
					<tr>
						<th scope="row">Harris' set (wait-free)</th>
						<td class="text-right">2</td>
						<td class="text-right">4</td>
						<td class="text-right">2</td>
						<td class="text-right">8%</td>
						<td class="text-right">10%</td>
						<td class="text-right">17%</td>
						<td class="text-right">34%</td>
						<td class="text-right">3%</td>
						<td class="text-right font-weight-bold">??s <i class="fas fa-check"></i></td>
					</tr>
				</tbody>
			</table> -->

			<h4 id="stresstest">Generating Flow Graphs</h4>
			<p>
				The installation comes with the flow graphs that we extracted.
				If you want to re-extract them, you can do:
			<pre class="bg-light border"><code class="bash">
        ./mk_graphs.sh
			</code></pre>
			<p>
				This will run <kbd>plankton</kbd> on all the set data structures mentioned above and export the encountered flow graphs.
				Note that this will overwrite the existing files containing the flow graphs we extracted!
				Also note that this task is quite time consuming.
			</p>
		</div>
		<br>



		<!-- ********************************************************************************** -->
		<!-- ************************************* KRILL ************************************** -->
		<!-- ********************************************************************************** -->

		<div class="mt-4">
			<h1>The <kbd>krill</kbd> Tool</h1>
			<p>
				Instead of using the benchmark script, you can directly interact with <kbd>krill</kbd>.
			</p>

			<h4>Basic Usage</h4>
			<p>
				You invoke <kbd>krill</kbd> like so:
			</p>
			<pre class="bg-light border"><code class="">
        ./krill &lt;path/to/flow_graph&gt;
			</code></pre>
			<p>
				The flags and their arguments are listed in the following table (excerpt).
			</p>
			<table class="table border">
				<thead>
					<tr>
						<th scope="col">Flag / Argument</th>
						<th class="text-center" scope="col">Optional</th>
						<th class="text-center" scope="col">Default</th>
						<th scope="col">Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="text-nowrap"><code> &lt;path_to_program&gt; </code></td>
						<td class="text-center">no</td>
						<td class="text-center">&mdash;</td>
						<td>
							Input program file to analyze.
							For examples, <i class="fas fa-link text-secondary"></i> <a class="text-secondary" href="#benchmarks-programs" class="">See Benchmark Programs</a>
						</td>
					</tr>
					<tr>
						<td class="text-nowrap"><code> --output <br> -o </code></td>
						<td class="text-center">yes</td>
						<td class="text-center"><code>--</code></td>
						<td>Output file for the evaluation. If none is specified, the output is written to standard out.</td>
					</tr>
					<tr>
						<td class="text-nowrap"><code> --repetitions <br> -r </code></td>
						<td class="text-center">yes</td>
						<td class="text-center"><code>false</code></td>
						<td>Number of times each benchmark is repeated.</td>
					</tr>
				</tbody>
			</table>
			<p>
				Besides the above, <code>--version</code> prints the tool's version, <code>-h</code> and <code>--help</code> print the full usage description.
			</p>

			<h4>Input Flow Graphs</h4>
			<p>
				The input format for flow graphs is shown on an example below.
				Input files may have arbitrarily many graphs.
				Flow graphs may have arbitrarily many nodes and constraints.
				Nodes may have arbitrarily many fields.
				For an exact specification of the input files, refer to the <a target="new" href="https://www.antlr.org/">ANTLR</a> parser definition <span class="text-nowrap"><i class="fas fa-link text-secondary">&nbsp;</i><a class="text-secondary" target="new" href="https://github.com/nyu-acsys/krill/releases/tag/TACAS23/src/parser/Plankton.g4">here</a></span>.
			</p>
			<pre class="bg-light border"><code class="c">
        #name "Foobarium"

        struct Node { data_t val; Node * next; } 
        def @outflow[next](Node * node, data_t key) { node -> val < key } 
        
        @graph { 
            #name "example graph"
            @node[a1 : Node*] {
                @pre-unreachable; // optional
                @pre-emptyInflow; // optional
                @field val : data_t = d1 / d2;
                @field next : Node* = a2 / a2;
            }
            @constraint d1 >= MIN;
            @constraint d1 <= MAX;
            @constraint d2 >= MIN;
            @constraint d2 <= MAX;
            @constraint a1 != nullptr;
            @constraint a2 == nullptr;
        }
			</code></pre>
		</div>
		<br>



		<!-- ********************************************************************************** -->
		<!-- ************************************ PLANKTON ************************************ -->
		<!-- ********************************************************************************** -->

		<div class="mt-4">
			<h1>The <kbd>plankton</kbd> Tool</h1>
			<p>
				Instead of using the <code>mk_graphs.sh</code> script, you can directly interact with <kbd>plankton</kbd>, which is built/compiled as part of the <kbd>krill</kbd> project.
			</p>
			<p>
				For more details, see the <a target="new" href="https://wolff09.github.io/plankton/">project page</a> for <kbd>plankton</kbd>.
			</p>

			<h4>Basic Usage</h4>
			<p>
				You invoke <kbd>plankton</kbd> like so:
			</p>
			<pre class="bg-light border"><code class="">
        ./plankton  [-f &lt;path/to/graph&gt;] [-p]  &lt;path/to/program&gt;
			</code></pre>
			<p>
				The flags and their arguments are listed in the following table (excerpt).
			</p>
			<table class="table border">
				<thead>
					<tr>
						<th scope="col">Flag / Argument</th>
						<th class="text-center" scope="col">Optional</th>
						<th class="text-center" scope="col">Default</th>
						<th scope="col">Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="text-nowrap"><code> &lt;path/to/program&gt; </code></td>
						<td class="text-center">no</td>
						<td class="text-center">&mdash;</td>
						<td>
							Input program file to analyze.
						</td>
					</tr>
					<tr>
						<td class="text-nowrap"><code> --footprint <br> -f </code></td>
						<td class="text-center">yes</td>
						<td class="text-center"><code>--</code></td>
						<td>File to which the encountered flow graphs are exported to.</td>
					</tr>
					<tr>
						<td class="text-nowrap"><code> --loopNoPostJoin</code></td>
						<td class="text-center">yes</td>
						<td class="text-center"><code>false</code></td>
						<td>Instructs proof construction to perform a <i>join</i> over the postannotations of loops. This increases the precision of proof.
						</td>
					</tr>
				</tbody>
			</table>
			<p>
				Besides the above, <code>--version</code> prints the tool's version, <code>-h</code> and <code>--help</code> print the full usage description.
			</p>
			<p>
				Note that <code>--loopNoPostJoin</code> flag is required in order for the FEMRS tree to be verified successfully.
				The remaining benchmarks do not require the increased precision.
				The <code>mk_graphs.sh</code> script passes this flag automatically.
			</p>
		</div>
		<br>





		<!-- ********************************************************************************** -->
		<!-- *********************************** REFERENCES *********************************** -->
		<!-- ********************************************************************************** -->
		<div id="references" class="mt-4">
			<br>
			<h1>References</h1>
			<div class="ref-item" data-ref-full="Feldman et al. 2018", data-ref-year="2018">
				<span class="ref-item-id">FeldmanEMRS18</span>
				<span class="ref-item-author">Yotam M. Y. Feldman, Constantin Enea, Adam Morrison, Noam Rinetzky, and Sharon Shoham. 2018.</span>
				<span class="ref-item-paper">Order out of Chaos: Proving Linearizability Using Local Views.</span>
				<span class="ref-item-where">In DISC (LIPIcs, Vol. 121). Springer.</span>
				<a target="new" class="ref-item-url text-nowrap" href="https://doi.org/10.4230/LIPIcs.DISC.2018.23">https://doi.org/10.4230/LIPIcs.DISC.2018.23</a>
			</div>
			<div class="ref-item" data-ref-full="Harris 2001", data-ref-year="2001">
				<span class="ref-item-id">Harris01</span>
				<span class="ref-item-author">Timothy L. Harris. 2001.</span>
				<span class="ref-item-paper">A Pragmatic Implementation of Non-blocking Linked-Lists.</span>
				<span class="ref-item-where">In DISC (LNCS, Vol. 2180). Springer.</span>
				<a target="new" class="ref-item-url text-nowrap" href="https://doi.org/10.1007/3-540-45414-4_21">https://doi.org/10.1007/3-540-45414-4_21</a>
			</div>
			<div class="ref-item" data-ref-full="Heller et al. 2005", data-ref-year="2005">
				<span class="ref-item-id">HellerHLMSS05</span>
				<span class="ref-item-author">Steve Heller, Maurice Herlihy, Victor Luchangco, Mark Moir, William N. Scherer III, and Nir Shavit. 2005.</span>
				<span class="ref-item-paper">A Lazy Concurrent List-Based Set Algorithm.</span>
				<span class="ref-item-where">In OPODIS (LNCS, Vol. 3974). Springer.</span>
				<a target="new" class="ref-item-url text-nowrap" href="https://doi.org/doi.org/10.1007/11795490_3">https://doi.org/10.1007/11795490_3</a>
			</div>
			<div class="ref-item" data-ref-full="Michael 2002a", data-ref-year="2002a">
				<span class="ref-item-id">Michael02a</span>
				<span class="ref-item-author">Maged M. Michael. 2002.</span>
				<span class="ref-item-paper">High performance dynamic lock-free hash tables and list-based sets.</span>
				<span class="ref-item-where">In SPAA..</span>
				<a target="new" class="ref-item-url text-nowrap" href="https://doi.org/10.1145/564870.564881">https://doi.org/10.1145/564870.564881</a>
			</div>
			<div class="ref-item" data-ref-full="O'Hearn et al. 2010", data-ref-year="2010">
				<span class="ref-item-id">OHearnRVYY10</span>
				<span class="ref-item-author">Peter W. O’Hearn, Noam Rinetzky, Martin T. Vechev, Eran Yahav, and Greta Yorsh. 2010.</span>
				<span class="ref-item-paper">Verifying linearizability with hindsight.</span>
				<span class="ref-item-where">In PODC. ACM.</span>
				<a target="new" class="ref-item-url text-nowrap" href="https://doi.org/10.1145/1835698.1835722">https://doi.org/10.1145/1835698.1835722</a>
			</div>
			<div class="ref-item" data-ref-full="Herlihy and Shavit 2008", data-ref-year="2008">
				<span class="ref-item-id">HerlihyS08</span>
				<span class="ref-item-author">Maurice Herlihy and Nir Shavit. 2008.</span>
				<span class="ref-item-paper">The art of multiprocessor programming (Chapter 9.5).</span>
				<span class="ref-item-where">Morgan Kaufmann.</span>
				<a target="new" class="ref-item-url text-nowrap" href="https://isbnsearch.org/isbn/9780123705914">https://isbnsearch.org/isbn/9780123705914</a>
			</div>
			<div class="ref-item" data-ref-full="Vechev and Yahav 2008", data-ref-year="2008">
				<span class="ref-item-id">VechevY08</span>
				<span class="ref-item-author">Martin T. Vechev and Eran Yahav. 2008.</span>
				<span class="ref-item-paper">Deriving linearizable fine-grained concurrent objects.</span>
				<span class="ref-item-where">In PLDI. ACM.</span>
				<a target="new" class="ref-item-url text-nowrap" href="https://doi.org/10.1145/1375581.1375598">https://doi.org/10.1145/1375581.1375598</a>
			</div>
		</div>

		<br><br><br>
	</div>

	<footer class="footer bg-light p-3">
		<div class="container text-right">
			<small class="text-muted">Made with <a target="new" href="https://getbootstrap.com" class="text-dark">Bootstrap</a> and <a target="new" href="https://html9responsiveboilerstrapjs.com" class="text-dark">H9RBS.js</a>. Hosted by <a target="new" href="https://pages.github.com" class="text-dark">GitHub Pages</a>.</small>
		</div>
	</footer>



	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

	<script type="text/javascript">
		var CITATION_MAP = { };
		function mk_link(authors, paper, where, url, linktext) {
			return '<a class="citation" target="new" data-toggle="tooltip" ' + 'title="' + authors + ' <i>' + paper + '</i> ' + where + '" href="' + url + '">' + linktext + '</a>';
		}
		$(".ref-item").each(function(){
			const ref_id = $(this).find(".ref-item-id").text();
			const ref_names = $(this).attr("data-ref-full");
			const ref_year = $(this).attr("data-ref-year");
			const ref_author = $(this).find(".ref-item-author").text();
			const ref_paper = $(this).find(".ref-item-paper").text();
			const ref_where = $(this).find(".ref-item-where").text();
			const ref_url = $(this).find(".ref-item-url").text();
			CITATION_MAP[ref_id] = [
				mk_link(ref_author, ref_paper, ref_where, ref_url, ref_names),
				mk_link(ref_author, ref_paper, ref_where, ref_url, ref_year),
			];
		});

		var all_found = true;
		$("span.ref-full, span.ref-year").each(function(){
			const ref_keys = $(this).text().split(",");
			const full = $(this).hasClass("ref-full") ? true : false;
			var citation = "";
			var first = true;
			for (index = 0, len = ref_keys.length; index < len; ++index) {
				const key = ref_keys[index].trim();
				var link;
				if (key in CITATION_MAP) {
					link = CITATION_MAP[key][full ? 0 : 1];
				} else {
					link = key;
					all_found = false;
				}
				if (!first) {
					citation += ", ";
				}
				first = false;
				citation += link;
			}
			$(this).html(citation);
		});
		if (all_found) {
			$("#references").addClass("d-none");
		}
	</script>
	<script type="text/javascript">
		$('[data-toggle="tooltip"]').tooltip({ 'html': true });
	</script>
</body>
</html>